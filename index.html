<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorldEdit Elite</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background: #1a1a3d; color: #fff; height: 100vh; overflow: hidden; }
        .container { height: 100vh; display: flex; flex-direction: column; }
        .media-container { flex: 1; display: flex; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.8); position: relative; }
        canvas, video { max-width: 100%; max-height: 100%; object-fit: contain; transition: transform 0.2s ease; }
        .navbar { position: fixed; bottom: 0; width: 100%; background: rgba(255, 255, 255, 0.1); padding: 10px; display: flex; overflow-x: auto; white-space: nowrap; box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3); backdrop-filter: blur(10px); }
        .tool-btn { padding: 8px 15px; margin: 0 5px; background: rgba(255, 255, 255, 0.15); border: none; color: #fff; border-radius: 20px; cursor: pointer; font-size: 14px; transition: all 0.2s ease; }
        .tool-btn:hover { background: #00ff99; color: #1a1a3d; transform: scale(1.1); }
        .controls { position: absolute; top: 10px; right: 10px; display: flex; gap: 10px; }
        .controls button, .controls select { padding: 8px; background: rgba(255, 255, 255, 0.2); border: none; color: #fff; border-radius: 5px; cursor: pointer; transition: all 0.2s; }
        .controls button:hover { background: #ff00cc; }
        input[type="file"] { position: absolute; top: 10px; left: 10px; padding: 8px; background: rgba(255, 255, 255, 0.2); border-radius: 5px; color: #fff; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .media-container { animation: fadeIn 0.5s ease; }
    </style>
</head>
<body>
    <div class="container">
        <div class="media-container">
            <input type="file" id="mediaUpload" accept="image/*,video/*">
            <canvas id="canvas" style="display: none;"></canvas>
            <video id="video" controls style="display: none;"></video>
            <div class="controls">
                <button onclick="saveMedia()">Save</button>
                <select id="saveFormat">
                    <option value="png">PNG</option>
                    <option value="jpg">JPG</option>
                    <option value="jpeg">JPEG</option>
                    <option value="pdf">PDF</option>
                    <option value="mp4">MP4</option>
                </select>
                <button onclick="undo()">Undo</button>
                <button onclick="redo()">Redo</button>
                <button onclick="reset()">Reset</button>
            </div>
        </div>
        <div class="navbar">
            <!-- Image Tools -->
            <button class="tool-btn" onclick="applyFilter('grayscale')">Grayscale</button>
            <button class="tool-btn" onclick="applyFilter('sepia')">Sepia</button>
            <button class="tool-btn" onclick="applyFilter('blur')">Blur</button>
            <button class="tool-btn" onclick="applyFilter('contrast')">Contrast</button>
            <button class="tool-btn" onclick="applyFilter('invert')">Invert</button>
            <button class="tool-btn" onclick="applyFilter('saturate')">Saturate</button>
            <button class="tool-btn" onclick="adjustBrightness(20)">Brighten</button>
            <button class="tool-btn" onclick="adjustBrightness(-20)">Darken</button>
            <button class="tool-btn" onclick="rotate(90)">Rotate 90°</button>
            <button class="tool-btn" onclick="rotate(-90)">Rotate -90°</button>
            <button class="tool-btn" onclick="flip('horizontal')">Flip H</button>
            <button class="tool-btn" onclick="flip('vertical')">Flip V</button>
            <button class="tool-btn" onclick="crop(0.9)">Crop 90%</button>
            <button class="tool-btn" onclick="crop(0.7)">Crop 70%</button>
            <button class="tool-btn" onclick="addText()">Add Text</button>
            <button class="tool-btn" onclick="resize(0.5)">Shrink 50%</button>
            <button class="tool-btn" onclick="resize(2)">Enlarge 200%</button>
            <button class="tool-btn" onclick="applyFilter('hue-rotate')">Hue Rotate</button>
            <button class="tool-btn" onclick="sharpen()">Sharpen</button>
            <button class="tool-btn" onclick="addBorder()">Border</button>
            <button class="tool-btn" onclick="adjustOpacity(0.8)">Opacity 80%</button>
            <button class="tool-btn" onclick="vignette()">Vignette</button>
            <button class="tool-btn" onclick="posterize()">Posterize</button>
            <button class="tool-btn" onclick="noise()">Noise</button>
            <button class="tool-btn" onclick="pixelate()">Pixelate</button>
            <button class="tool-btn" onclick="emboss()">Emboss</button>
            <button class="tool-btn" onclick="solarize()">Solarize</button>
            <button class="tool-btn" onclick="tiltShift()">Tilt Shift</button>
            <button class="tool-btn" onclick="lensFlare()">Lens Flare</button>
            <button class="tool-btn" onclick="vintage()">Vintage</button>
            <button class="tool-btn" onclick="cartoon()">Cartoon</button>
            <button class="tool-btn" onclick="oilPaint()">Oil Paint</button>
            <button class="tool-btn" onclick="watercolor()">Watercolor</button>
            <button class="tool-btn" onclick="sketch()">Sketch</button>
            <button class="tool-btn" onclick="glow()">Glow</button>
            <!-- Video Tools -->
            <button class="tool-btn" onclick="applyVideoFilter('grayscale')">V-Grayscale</button>
            <button class="tool-btn" onclick="applyVideoFilter('sepia')">V-Sepia</button>
            <button class="tool-btn" onclick="applyVideoFilter('blur')">V-Blur</button>
            <button class="tool-btn" onclick="trimVideo(5)">Trim 5s</button>
            <button class="tool-btn" onclick="trimVideo(-5)">Rewind 5s</button>
            <button class="tool-btn" onclick="speedVideo(1.5)">Speed 1.5x</button>
            <button class="tool-btn" onclick="speedVideo(0.5)">Slow 0.5x</button>
            <button class="tool-btn" onclick="muteVideo()">Mute</button>
            <button class="tool-btn" onclick="rotateVideo(90)">V-Rotate 90°</button>
            <button class="tool-btn" onclick="cropVideo(0.9)">V-Crop 90%</button>
            <button class="tool-btn" onclick="addOverlay()">V-Overlay</button>
            <button class="tool-btn" onclick="volume(0.5)">Vol 50%</button>
            <button class="tool-btn" onclick="volume(1.5)">Vol 150%</button>
            <button class="tool-btn" onclick="loopVideo()">Loop</button>
            <button class="tool-btn" onclick="reverseVideo()">Reverse</button>
            <button class="tool-btn" onclick="applyVideoFilter('contrast')">V-Contrast</button>
            <button class="tool-btn" onclick="applyVideoFilter('brightness')">V-Brighten</button>
            <button class="tool-btn" onclick="fadeIn()">Fade In</button>
            <button class="tool-btn" onclick="fadeOut()">Fade Out</button>
            <button class="tool-btn" onclick="splitVideo()">Split</button>
            <button class="tool-btn" onclick="stabilize()">Stabilize</button>
            <button class="tool-btn" onclick="denoise()">Denoise</button>
            <button class="tool-btn" onclick="colorGrade()">Color Grade</button>
            <button class="tool-btn" onclick="slowMo()">Slow Mo</button>
            <button class="tool-btn" onclick="timeLapse()">Time Lapse</button>
            <button class="tool-btn" onclick="zoomIn()">Zoom In</button>
            <button class="tool-btn" onclick="zoomOut()">Zoom Out</button>
            <button class="tool-btn" onclick="panLeft()">Pan Left</button>
            <button class="tool-btn" onclick="panRight()">Pan Right</button>
            <button class="tool-btn" onclick="vignetteVideo()">V-Vignette</button>
            <button class="tool-btn" onclick="retroVideo()">V-Retro</button>
            <button class="tool-btn" onclick="cinematic()">Cinematic</button>
            <button class="tool-btn" onclick="greenScreen()">Green Screen</button>
            <button class="tool-btn" onclick="stabilizeAudio()">Stabilize Audio</button>
            <button class="tool-btn" onclick="echo()">Echo</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas'), video = document.getElementById('video'), ctx = canvas.getContext('2d');
        let mediaType = null, img = new Image(), history = [], currentStep = -1;

        window.onload = () => { const saved = localStorage.getItem('editorState'); if (saved) loadState(JSON.parse(saved)); };

        document.getElementById('mediaUpload').addEventListener('change', (e) => {
            const file = e.target.files[0], url = URL.createObjectURL(file);
            if (file.type.startsWith('image')) {
                mediaType = 'image'; img.src = url; img.onload = () => {
                    canvas.width = img.width; canvas.height = img.height; ctx.drawImage(img, 0, 0);
                    canvas.style.display = 'block'; video.style.display = 'none'; saveState();
                };
            } else if (file.type.startsWith('video')) {
                mediaType = 'video'; video.src = url; video.style.display = 'block'; canvas.style.display = 'none'; saveState();
            }
        });

        // Image Tools
        function applyFilter(filter) { if (mediaType === 'image') { ctx.filter = `${filter}(100%)`; ctx.drawImage(img, 0, 0); saveState(); } }
        function adjustBrightness(value) { if (mediaType === 'image') { ctx.filter = `brightness(${100 + value}%)`; ctx.drawImage(img, 0, 0); saveState(); } }
        function rotate(deg) { if (mediaType === 'image') { ctx.save(); ctx.translate(canvas.width / 2, canvas.height / 2); ctx.rotate(deg * Math.PI / 180); ctx.translate(-canvas.width / 2, -canvas.height / 2); ctx.drawImage(img, 0, 0); ctx.restore(); saveState(); } }
        function flip(direction) { if (mediaType === 'image') { ctx.save(); ctx.scale(direction === 'horizontal' ? -1 : 1, direction === 'vertical' ? -1 : 1); ctx.drawImage(img, direction === 'horizontal' ? -canvas.width : 0, direction === 'vertical' ? -canvas.height : 0); ctx.restore(); saveState(); } }
        function crop(scale) { if (mediaType === 'image') { canvas.width *= scale; canvas.height *= scale; ctx.drawImage(img, 0, 0, canvas.width, canvas.height); saveState(); } }
        function addText() { if (mediaType === 'image') { const text = prompt('Text:'); ctx.font = '30px Arial'; ctx.fillStyle = '#fff'; ctx.fillText(text, 50, 50); saveState(); } }
        function resize(scale) { if (mediaType === 'image') { canvas.width *= scale; canvas.height *= scale; ctx.drawImage(img, 0, 0, canvas.width, canvas.height); saveState(); } }
        function sharpen() { if (mediaType === 'image') { ctx.filter = 'contrast(150%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function addBorder() { if (mediaType === 'image') { ctx.strokeStyle = '#fff'; ctx.lineWidth = 5; ctx.strokeRect(0, 0, canvas.width, canvas.height); saveState(); } }
        function adjustOpacity(value) { if (mediaType === 'image') { ctx.globalAlpha = value; ctx.drawImage(img, 0, 0); ctx.globalAlpha = 1; saveState(); } }
        function vignette() { if (mediaType === 'image') { ctx.filter = 'brightness(50%) contrast(120%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function posterize() { if (mediaType === 'image') { ctx.filter = 'contrast(200%) brightness(80%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function noise() { if (mediaType === 'image') { ctx.filter = 'contrast(110%) brightness(90%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function pixelate() { if (mediaType === 'image') { ctx.imageSmoothingEnabled = false; ctx.drawImage(img, 0, 0, canvas.width / 10, canvas.height / 10); ctx.drawImage(canvas, 0, 0, canvas.width / 10, canvas.height / 10, 0, 0, canvas.width, canvas.height); saveState(); } }
        function emboss() { if (mediaType === 'image') { ctx.filter = 'contrast(150%) brightness(50%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function solarize() { if (mediaType === 'image') { ctx.filter = 'invert(50%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function tiltShift() { if (mediaType === 'image') { ctx.filter = 'blur(2px) contrast(120%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function lensFlare() { if (mediaType === 'image') { ctx.filter = 'brightness(120%) contrast(110%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function vintage() { if (mediaType === 'image') { ctx.filter = 'sepia(50%) contrast(90%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function cartoon() { if (mediaType === 'image') { ctx.filter = 'contrast(150%) saturate(200%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function oilPaint() { if (mediaType === 'image') { ctx.filter = 'blur(1px) contrast(130%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function watercolor() { if (mediaType === 'image') { ctx.filter = 'blur(2px) saturate(150%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function sketch() { if (mediaType === 'image') { ctx.filter = 'grayscale(100%) contrast(150%)'; ctx.drawImage(img, 0, 0); saveState(); } }
        function glow() { if (mediaType === 'image') { ctx.filter = 'brightness(120%) blur(1px)'; ctx.drawImage(img, 0, 0); saveState(); } }

        // Video Tools
        function applyVideoFilter(filter) { if (mediaType === 'video') { video.style.filter = `${filter}(100%)`; saveState(); } }
        function trimVideo(seconds) { if (mediaType === 'video') { video.currentTime += seconds; saveState(); } }
        function speedVideo(rate) { if (mediaType === 'video') { video.playbackRate = rate; saveState(); } }
        function muteVideo() { if (mediaType === 'video') { video.muted = !video.muted; saveState(); } }
        function rotateVideo(deg) { if (mediaType === 'video') { video.style.transform = `rotate(${deg}deg)`; saveState(); } }
        function cropVideo(scale) { if (mediaType === 'video') { video.style.width = `${video.offsetWidth * scale}px`; video.style.height = `${video.offsetHeight * scale}px`; saveState(); } }
        function addOverlay() { if (mediaType === 'video') { video.style.opacity = '0.8'; saveState(); } }
        function volume(level) { if (mediaType === 'video') { video.volume = Math.min(1, Math.max(0, video.volume * level)); saveState(); } }
        function loopVideo() { if (mediaType === 'video') { video.loop = !video.loop; saveState(); } }
        function reverseVideo() { if (mediaType === 'video') { video.playbackRate = -1; saveState(); } }
        function fadeIn() { if (mediaType === 'video') { video.style.transition = 'opacity 1s'; video.style.opacity = 1; saveState(); } }
        function fadeOut() { if (mediaType === 'video') { video.style.transition = 'opacity 1s'; video.style.opacity = 0.5; saveState(); } }
        function splitVideo() { if (mediaType === 'video') { video.pause(); saveState(); } }
        function stabilize() { if (mediaType === 'video') { video.style.transform = 'scale(1.05)'; saveState(); } }
        function denoise() { if (mediaType === 'video') { video.style.filter = 'contrast(110%)'; saveState(); } }
        function colorGrade() { if (mediaType === 'video') { video.style.filter = 'saturate(120%)'; saveState(); } }
        function slowMo() { if (mediaType === 'video') { video.playbackRate = 0.25; saveState(); } }
        function timeLapse() { if (mediaType === 'video') { video.playbackRate = 4; saveState(); } }
        function zoomIn() { if (mediaType === 'video') { video.style.transform = 'scale(1.2)'; saveState(); } }
        function zoomOut() { if (mediaType === 'video') { video.style.transform = 'scale(0.8)'; saveState(); } }
        function panLeft() { if (mediaType === 'video') { video.style.transform = 'translateX(-50px)'; saveState(); } }
        function panRight() { if (mediaType === 'video') { video.style.transform = 'translateX(50px)'; saveState(); } }
        function vignetteVideo() { if (mediaType === 'video') { video.style.filter = 'brightness(50%) contrast(120%)'; saveState(); } }
        function retroVideo() { if (mediaType === 'video') { video.style.filter = 'sepia(50%)'; saveState(); } }
        function cinematic() { if (mediaType === 'video') { video.style.filter = 'contrast(130%) brightness(90%)'; saveState(); } }
        function greenScreen() { if (mediaType === 'video') { video.style.filter = 'hue-rotate(90deg)'; saveState(); } }
        function stabilizeAudio() { if (mediaType === 'video') { video.volume = 0.8; saveState(); } }
        function echo() { if (mediaType === 'video') { video.volume = 0.6; saveState(); } }

        function saveMedia() {
            const format = document.getElementById('saveFormat').value;
            if (mediaType === 'image') { const link = document.createElement('a'); link.download = `elite.${format}`; link.href = canvas.toDataURL(`image/${format}`); link.click(); }
            else alert('Video saving requires manual download.');
        }

        function saveState() { if (mediaType === 'image') { history = history.slice(0, currentStep + 1); history.push(canvas.toDataURL()); currentStep++; } localStorage.setItem('editorState', JSON.stringify({ history, currentStep, mediaType })); }
        function loadState(state) { history = state.history; currentStep = state.currentStep; mediaType = state.mediaType; if (mediaType === 'image' && history.length) { const imgState = new Image(); imgState.src = history[currentStep]; imgState.onload = () => { canvas.width = imgState.width; canvas.height = imgState.height; ctx.drawImage(imgState, 0, 0); canvas.style.display = 'block'; }; } }
        function undo() { if (currentStep > 0) { currentStep--; const imgState = new Image(); imgState.src = history[currentStep]; imgState.onload = () => ctx.drawImage(imgState, 0, 0); } }
        function redo() { if (currentStep < history.length - 1) { currentStep++; const imgState = new Image(); imgState.src = history[currentStep]; imgState.onload = () => ctx.drawImage(imgState, 0, 0); } }
        function reset() { if (mediaType === 'image') { ctx.filter = 'none'; ctx.drawImage(img, 0, 0); saveState(); } else { video.style.filter = 'none'; video.style.transform = 'none'; video.playbackRate = 1; video.muted = false; saveState(); } }
    </script>
</body>
</html>
